"use strict";(self.webpackChunksama=self.webpackChunksama||[]).push([[624],{3632:(I,h,r)=>{r.d(h,{i:()=>C});var c=r(9291),f=r(9397),t=r(3052),U=r(9862),v=r(7699);let C=(()=>{class g{constructor(p,l){this.http=p,this.authState=l,this.baseUrl=t.N.baseUrl,this.userProfile=(0,c.tdS)({})}profile(){return this.http.get(`${this.baseUrl}v1/profile`)}updateProfile(p){return this.http.post(`${this.baseUrl}v1/update-profile`,p).pipe((0,f.b)(l=>{this.authState.updateUser(l.data),this.userProfile.update(()=>l.data)}))}sync(){this.profile().subscribe(p=>this.userProfile.update(()=>p.data))}static#t=this.\u0275fac=function(l){return new(l||g)(c.LFG(U.eN),c.LFG(v.V))};static#e=this.\u0275prov=c.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},624:(I,h,r)=>{r.r(h),r.d(h,{UserAccountModule:()=>N});var c=r(6814),f=r(3911),t=r(9291);const U=["imageElement"];let v=(()=>{class o{constructor(e){this.el=e,this.lang=document.body.lang,this.imageUrl=null,this.save=new t.vpe,this.cancel=new t.vpe,this.isDragging=!1,this.dragStartX=0,this.dragStartY=0,this.imagePosition={x:0,y:0}}hireEvent(e){this.isDragging=!0;const{clientX:i,clientY:n}=this.getEventCoordinates(e);this.dragStartX=i,this.dragStartY=n}removeEvent(){this.isDragging=!1}startDrag(e){e.preventDefault(),this.hireEvent(e)}stopDrag(){this.removeEvent()}moveImage(e){if(this.isDragging){const{clientX:i,clientY:n}=this.getEventCoordinates(e);this.imagePosition.x+=i-this.dragStartX,this.imagePosition.y+=n-this.dragStartY,this.dragStartX=i,this.dragStartY=n}}getImageStyle(){return{transform:`translate(${this.imagePosition.x}px, ${this.imagePosition.y}px)`}}getEventCoordinates(e){return e instanceof MouseEvent?{clientX:e.clientX,clientY:e.clientY}:e instanceof TouchEvent&&e.touches.length>0?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:0,clientY:0}}crop(){const e=this.imageElement.nativeElement,n=document.getElementById("crop-box").getBoundingClientRect(),a=n.width,s=n.height,y=e.getBoundingClientRect(),b=e.naturalWidth/y.width,Z=e.naturalHeight/y.height,Q=(n.left-y.left)*b,W=(n.top-y.top)*Z,M=a*b,A=s*Z,P=document.createElement("canvas");P.width=M,P.height=A,P.getContext("2d")?.drawImage(e,Q,W,M,A,0,0,M,A);const V=P.toDataURL("image/png");this.save.emit(V)}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(t.SBq))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["image-cropper"]],viewQuery:function(i,n){if(1&i&&t.Gf(U,5),2&i){let a;t.iGM(a=t.CRH())&&(n.imageElement=a.first)}},inputs:{imageUrl:"imageUrl"},outputs:{save:"save",cancel:"cancel"},standalone:!0,features:[t.jDz],decls:10,vars:4,consts:[[1,"cropper-container",3,"mousedown","touchstart","mouseleave","mouseup","touchend","mousemove","touchmove"],["id","uploadProfileImage","alt","Selected Image","draggable","false",3,"src","ngStyle"],["imageElement",""],[1,"crop-box-overlay"],["id","crop-box",1,"crop-box"],[1,"d-flex","align-items-center","gap-2","my-1"],[1,"w-100","cancel-btn",3,"click"],[1,"w-100","save-btn",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t.NdJ("mousedown",function(s){return n.startDrag(s)})("touchstart",function(s){return n.startDrag(s)})("mouseleave",function(){return n.stopDrag()})("mouseup",function(){return n.stopDrag()})("touchend",function(){return n.stopDrag()})("mousemove",function(s){return n.moveImage(s)})("touchmove",function(s){return n.moveImage(s)}),t._UZ(1,"img",1,2)(3,"div",3)(4,"div",4),t.qZA(),t.TgZ(5,"div",5)(6,"button",6),t.NdJ("click",function(){return n.cancel.emit(!1)}),t._uU(7),t.qZA(),t.TgZ(8,"button",7),t.NdJ("click",function(){return n.crop()}),t._uU(9),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("src",n.imageUrl,t.LSH)("ngStyle",n.getImageStyle()),t.xp6(6),t.Oqu("en"==n.lang?"cancel":"\u0625\u0644\u063a\u0627\u0621"),t.xp6(2),t.Oqu("en"==n.lang?"save":"\u062d\u0641\u0638"))},dependencies:[c.ez,c.PC],styles:["[_nghost-%COMP%]{display:block;width:100%}img[_ngcontent-%COMP%]{width:100%;object-fit:cover;position:absolute;cursor:pointer}.cropper-container[_ngcontent-%COMP%]{height:60vh;position:relative;overflow:hidden;width:100%;max-height:350px;background-color:#00000080}.crop-box[_ngcontent-%COMP%], .crop-box-overlay[_ngcontent-%COMP%]{width:200px;height:200px;position:absolute;inset:0;margin:auto;z-index:99;border-radius:100%}.crop-box-overlay[_ngcontent-%COMP%]{border-radius:0;width:100%;height:100%;background:radial-gradient(circle at center,transparent 100px,rgba(5,16,54,.245) 101px)}button[_ngcontent-%COMP%]{font-size:16px;background-color:transparent;outline:none;border:none;padding:8px 12px;cursor:pointer;border-radius:4px}.save-btn[_ngcontent-%COMP%]{background-color:rgb(var(--primary));color:#fff}.cancel-btn[_ngcontent-%COMP%]{background-color:rgb(var(--cancel))}"]})}return o})();class C{loadImage(d){return new Promise(e=>{d.length<=0&&e(null);const i=new FileReader;i.onload=n=>{e(n.target.result)},i.readAsDataURL(d[0])})}}let g=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({providers:[C],imports:[c.ez,v]})}return o})();var T=r(439),p=r(7699),l=r(3632);let L=(()=>{class o{constructor(e){this.uploadController=e,this.onLoad=new t.vpe}onUpload(e){this.uploadController.loadImage(e.target.files).then(n=>{this.onLoad.emit(n)})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(C))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["input","ngUpload",""]],hostBindings:function(i,n){1&i&&t.NdJ("change",function(s){return n.onUpload(s)})},outputs:{onLoad:"onLoad"},standalone:!0})}return o})();var D=r(9521),E=r(7732);let x=(()=>{class o{constructor(e,i){this.auth=e,this.profileService=i,this.cropperVisibility=!1}onUpload(e){this.imgSrc=e,this.cropperVisibility=!0}cancel(){this.cropperVisibility=!1}save(e){this.imgSrc=e,this.cropperVisibility=!1}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(p.V),t.Y36(l.i))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-profile-image"]],standalone:!0,features:[t.jDz],decls:13,vars:5,consts:[[1,"profile-meta-info","grid-sm","align-items-center","mb-2"],[1,"sticky-upload"],[1,"profile-img"],[1,"img-contain",3,"src","alt"],["for","upload",1,"upload-image"],["src","assets/images/svg/upload.svg","alt","uplaod","width","22","height","22"],["id","upload","type","file","accept","image/*","ngUpload","",3,"onLoad"],[3,"visible","visibleChange"],[1,"img-cropper-container"],[3,"imageUrl","cancel","save"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"label",4),t._UZ(5,"img",5),t.TgZ(6,"input",6),t.NdJ("onLoad",function(s){return n.onUpload(s)}),t.qZA()()(),t.TgZ(7,"h3"),t._uU(8),t.qZA()(),t.TgZ(9,"ng-dialog",7),t.NdJ("visibleChange",function(s){return n.cropperVisibility=s}),t.TgZ(10,"dialog-body")(11,"div",8)(12,"image-cropper",9),t.NdJ("cancel",function(){return n.cancel()})("save",function(s){return n.save(s)}),t.qZA()()()()),2&i&&(t.xp6(3),t.Q6J("src",n.imgSrc||(null==n.auth.user?null:n.auth.user.image),t.LSH)("alt",null==n.auth.user?null:n.auth.user.first_name),t.xp6(5),t.Oqu(null==n.auth.user?null:n.auth.user.first_name),t.xp6(1),t.Q6J("visible",n.cropperVisibility),t.xp6(3),t.Q6J("imageUrl",n.imgSrc))},dependencies:[c.ez,g,L,v,T.S,D.a,E.H],styles:[".profile-meta-info[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;overflow:hidden}.profile-meta-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:500;text-transform:capitalize}.profile-meta-info[_ngcontent-%COMP%]   .sticky-upload[_ngcontent-%COMP%]{position:relative}.profile-meta-info[_ngcontent-%COMP%]   .upload-image[_ngcontent-%COMP%]{background-color:#fff;border-radius:50%;width:34px;height:34px;display:flex;align-items:center;justify-content:center;cursor:pointer;position:absolute;bottom:0;right:0}.profile-meta-info[_ngcontent-%COMP%]   .upload-image[_ngcontent-%COMP%]:lang(ar){right:unset;left:0}.profile-meta-info[_ngcontent-%COMP%]   .upload-image[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.img-cropper-container[_ngcontent-%COMP%]{width:100vw;min-width:300px;max-width:400px}"]})}return o})();var m=r(9068),u=r(6026),S=r(319);function J(o,d){if(1&o&&(t.TgZ(0,"div",4)(1,"ul",5),t._UZ(2,"app-profile-image"),t.TgZ(3,"li",6),t._UZ(4,"img",7),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"li",6),t._UZ(8,"img",8),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"li",6),t._UZ(12,"img",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",6),t._UZ(16,"img",10),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"li",6),t._UZ(20,"img",11),t._uU(21),t.ALo(22,"translate"),t.qZA()()()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("routerLink",e.appRoutes.userAccount.profile),t.xp6(2),t.hij(" ",t.lcZ(6,10,"userAccount.profile")," "),t.xp6(2),t.Q6J("routerLink",e.appRoutes.userAccount.wallet),t.xp6(2),t.hij(" ",t.lcZ(10,12,"userAccount.samaWallet")," "),t.xp6(2),t.Q6J("routerLink",e.appRoutes.userAccount.reservation),t.xp6(2),t.hij(" ",t.lcZ(14,14,"userAccount.reservation")," "),t.xp6(2),t.Q6J("routerLink",e.appRoutes.userAccount.bookingOffer),t.xp6(2),t.hij(" ",t.lcZ(18,16,"userAccount.offerBooking")," "),t.xp6(2),t.Q6J("routerLink",e.appRoutes.userAccount.favorite),t.xp6(2),t.hij(" ",t.lcZ(22,18,"userAccount.favourites")," ")}}function _(o,d){1&o&&t._UZ(0,"div")}let R=(()=>{class o{constructor(e){this.deviceMode=e,this.appRoutes=u.VP}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(S.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-user-account-layout"]],decls:5,vars:4,consts:[[1,"container"],[1,"align-items-start","my-3"],["class","user-options",4,"ngIf"],[4,"ngIf"],[1,"user-options"],[1,"shadow-sm","rounded-2","pb-5"],["routerLinkActive","active-link",3,"routerLink"],["src","assets/images/svg/profile.svg","alt","profile","width","22","height","22"],["src","assets/images/svg/wallet.svg","alt","profile","width","22","height","22"],["src","assets/images/svg/save.svg","alt","profile","width","22","height","22"],["src","assets/images/svg/save-offer.svg","alt","profile","width","22","height","22"],["src","assets/images/svg/heart.svg","alt","profile","width","22","height","22"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,J,23,20,"div",2),t.YNc(3,_,1,0,"div",3),t._UZ(4,"router-outlet"),t.qZA()()),2&i&&(t.xp6(1),t.ekj("row-sm",n.deviceMode.isDesktop()),t.xp6(1),t.Q6J("ngIf",n.deviceMode.isDesktop()),t.xp6(1),t.Q6J("ngIf",n.deviceMode.isMobile()))},dependencies:[c.O5,m.lC,m.rH,m.Od,x,f.X$],styles:[".user-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:1.4rem 10px;width:-moz-fit-content;width:fit-content}.user-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;cursor:pointer;min-width:220px;font-size:15px;font-weight:500;padding:15px 8px;margin-bottom:10px}.user-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transition:.3s;background-color:rgb(var(--primary),.2);color:rgb(var(--primary));border-radius:4px}.active-link[_ngcontent-%COMP%]{background-color:rgb(var(--primary),.2);color:rgb(var(--primary));border-radius:4px}"]})}return o})();var Y=r(3052),w=r(9862);let H=(()=>{class o{constructor(e){this.http=e,this.baseUrl=Y.N.baseUrl}getReservation(e){return this.http.get(`${this.baseUrl}v1/getReservations?type=${e}`)}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(w.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const O=(o,d)=>(0,t.f3M)(H).getReservation(u.HJ.userAccount.reservation==o.routeConfig?.path?"service":"offer"),X=[{path:"",component:R,resolve:[(o,d)=>{const e=(0,t.f3M)(l.i);return!!Object.keys(e.userProfile()).length||e.sync()}],children:[{path:"",redirectTo:u.HJ.userAccount.profile,pathMatch:"full"},{path:u.HJ.userAccount.profile,loadComponent:()=>Promise.all([r.e(223),r.e(611)]).then(r.bind(r,6611)).then(o=>o.ProfileComponent)},{path:u.HJ.userAccount.wallet,loadComponent:()=>r.e(124).then(r.bind(r,8124)).then(o=>o.WalletComponent)},{path:u.HJ.userAccount.reservation,loadComponent:()=>Promise.all([r.e(592),r.e(246)]).then(r.bind(r,7246)).then(o=>o.ReservationComponent),resolve:{data:O}},{path:u.HJ.userAccount.bookingOffer,loadComponent:()=>Promise.all([r.e(592),r.e(127)]).then(r.bind(r,9127)).then(o=>o.OfferBookingComponent),resolve:{data:O}},{path:u.HJ.userAccount.favorite,loadComponent:()=>r.e(580).then(r.bind(r,4580)).then(o=>o.FavoriteComponent)}]}];let z=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(X),m.Bz]})}return o})(),N=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[c.ez,z,f.aw,x]})}return o})()}}]);