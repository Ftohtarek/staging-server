"use strict";(self.webpackChunksama=self.webpackChunksama||[]).push([[466],{1466:(L,m,l)=>{l.r(m),l.d(m,{OffersComponent:()=>Y});var h=l(6814),u=l(9862),a=l(6223),p=l(3911),f=l(8312),_=l(3838),t=l(9291);let v=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[h.ez]})}return n})();class C{constructor(){this.buffer=[]}}class b extends C{constructor(s=[]){super(),this.onSelectChanged=new t.vpe,this.buffer=s}select(s){this.isExist(s)||this.buffer.push(s)}deSelect(s){if(!this.isExist(s))return;const e=this.buffer.findIndex(i=>i.id===s.id);this.buffer.splice(e,1)}isExist(s){return this.buffer.some(e=>e.id===s.id)}toggle(s){this.isExist(s)?this.deSelect(s):this.select(s)}clear(){this.buffer=[]}getAllSelectItem(){return this.buffer.slice()}isSelected(s){return this.isExist(s)}selectAll(s){this.clear(),s.forEach(e=>{this.select(e)})}hasValue(){return this.buffer.length>0}}class x extends b{constructor(s={multiple:!0}){super(),this.multiple=!0,this.multiple=s.multiple}toggle(s){this.multiple?super.toggle(s):this.singleSelect(s),this.onSelectChanged.emit(this.getAllSelectItem())}singleSelect(s){this.buffer=this.isExist(s)?[]:[s]}clear(){super.clear(),this.onSelectChanged.emit(this.getAllSelectItem())}selectAll(s){super.selectAll(s),this.onSelectChanged.emit(this.getAllSelectItem())}setInitialValue(s){this.buffer=s||[]}}let T=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[h.ez]})}return n})();var M=l(4069),d=l(9269),O=l(9068),Z=l(5136),S=l(866);let g=(()=>{class n{constructor(){this.type="double",this.maxSteps=0,this.minSteps=0,this.min=0,this.max=0}setConfigurations(){this.lineWidth=this.line.clientWidth-this.maxTrigger.clientWidth,"double"==this.type&&this.setDoubleConfig()}setDoubleConfig(){}syncMax(e){this.maxSteps=e,this.setTriggerTranslation(this.maxTrigger,e);const r=this.max-(this.max-this.min)/this.lineWidth*Math.abs(this.maxSteps);this.maxControll.setValue(Math.round(r))}syncMin(e){this.minSteps=e,this.setTriggerTranslation(this.minTrigger,e);const r=(this.max-this.min)/this.lineWidth*Math.abs(this.minSteps)+Number(this.min);this.minControll.setValue(Math.round(r))}setTriggerTranslation(e,i){e.style.transform=`translateX(${i}px)`}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),y=(()=>{class n{constructor(e,i){this.ele=e,this.controller=i,this.isRtl="ar"==document.body.lang,this.canDrag=(0,t.tdS)(!1),this.swapHolder=0,this.dragStartCoordinates={clientX:0,clientY:0},this.mousedown=r=>this.startDrag(r),this.mouseup=r=>this.stopDrag(r),this.touchstart=r=>this.startDrag(r),this.touchend=r=>this.stopDrag(r),this.stopDrag=r=>{this.canDrag.update(()=>!1),document.removeEventListener("mousemove",this.moveTarget),document.removeEventListener("click",this.stopDrag)},this.moveTarget=r=>{this.canDrag()&&this.syncTrigger(this.calculateTriggerTranslation(r,this.controller.lineWidth,this.trigger))},this.getEventCoordinates=r=>({clientX:r.clientX||r.touches[0].clientX||0,clientY:r.clientY||r.touches[0].clientY||0})}startDrag(e){this.canDrag.update(()=>!0),this.trigger=e.target.closest("[minTrigger]")?"min":"max",this.setInitialValue(e),document.addEventListener("mousemove",this.moveTarget),document.addEventListener("click",this.stopDrag)}setInitialValue(e){this.swapHolder="max"==this.trigger?this.controller.maxSteps:this.controller.minSteps,this.dragStartCoordinates=this.getEventCoordinates(e)}syncTrigger(e){"max"==this.trigger?this.controller.syncMax(e):this.controller.syncMin(e)}calculateTriggerTranslation(e,i,r){return this.swapHolder+=e.clientX-this.dragStartCoordinates.clientX,this.dragStartCoordinates=this.getEventCoordinates(e),"max"==r?this.isRtl?Math.min(0,Math.max(-i+this.controller.minSteps,this.swapHolder)):Math.max(0,Math.min(i+this.controller.minSteps,this.swapHolder)):this.isRtl?Math.max(0,Math.min(i+this.controller.maxSteps,this.swapHolder)):Math.min(0,Math.max(-i+this.controller.maxSteps,this.swapHolder))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(t.SBq),t.Y36(g))};static#e=this.\u0275dir=t.lG2({type:n,selectors:[["","triggerMove",""]],hostBindings:function(i,r){1&i&&t.NdJ("mousedown",function(o){return r.mousedown(o)})("mouseup",function(o){return r.mouseup(o)})("touchstart",function(o){return r.touchstart(o)})("touchend",function(o){return r.touchend(o)})}})}return n})(),A=(()=>{class n{constructor(e,i){this.controller=e,this.ele=i,this.controller.maxTrigger=this.ele.nativeElement}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(g),t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:n,selectors:[["","maxTrigger",""]]})}return n})(),F=(()=>{class n{constructor(e,i){this.controller=e,this.ele=i,this.controller.minTrigger=this.ele.nativeElement}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(g),t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:n,selectors:[["","minTrigger",""]]})}return n})(),w=(()=>{class n{constructor(e){this.controller=e,this.isRtl="ar"==document.body.lang,this.click=i=>this.moveOnClick(i),this.moveOnClick=i=>{i.target.closest("[maxTrigger],[minTrigger]")||(this.trigger=this.isWithinQuarter(i.offsetX,this.controller.line.clientWidth,2)?"max":"min",this.syncTrigger(this.calculateTriggerTranslation(i.offsetX,this.controller.line.clientWidth,this.trigger)))}}isWithinQuarter(e,i,r){return this.isRtl?i/e<r:i/e>r}calculateTriggerTranslation(e,i,r){const c=.5*this.controller.maxTrigger.clientWidth;return"max"==r?this.isRtl?Math.min(0,e+c-i):Math.max(0,e-c):this.isRtl?Math.max(0,e-c):Math.min(0,e+c-i)}syncTrigger(e){"max"==this.trigger?this.controller.syncMax(e):this.controller.syncMin(e)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(g))};static#e=this.\u0275dir=t.lG2({type:n,selectors:[["","lineTrigger",""]],hostBindings:function(i,r){1&i&&t.NdJ("click",function(o){return r.click(o)})}})}return n})(),P=(()=>{class n{set min(e){this.controller.min=e}set max(e){this.controller.max=e}set minControl(e){this.controller.minControll=e}set maxControl(e){this.controller.maxControll=e}constructor(e,i){this.ele=e,this.controller=i}ngAfterViewInit(){this.controller.line=this.ele.nativeElement.querySelector("*[lineTrigger]"),this.controller.setConfigurations()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(t.SBq),t.Y36(g))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-range"]],inputs:{min:"min",max:"max",minControl:"minControl",maxControl:"maxControl"},decls:4,vars:0,consts:[[1,"range-wrapper"],["lineTrigger","",1,"range-line"],["triggerMove","","maxTrigger","",1,"trigger","max"],["triggerMove","","minTrigger","",1,"trigger","min"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"span",2)(3,"span",3),t.qZA()())},dependencies:[y,A,F,w],styles:["[_nghost-%COMP%]{--range-line-bg: #e6e6e6;--range-line-height: 3px;--trigger-bg: #dc782c;--triger-size: 30px}.range-wrapper[_ngcontent-%COMP%]{position:relative}.range-line[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;width:100%;height:var(--range-line-height);background-color:var(--range-line-bg);border-radius:2px;display:flex;align-items:center;justify-content:space-between}.trigger[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;display:inline-block;background-color:var(--trigger-bg);width:var(--triger-size);height:var(--triger-size);border-radius:50%;cursor:pointer}"]})}return n})(),k=(()=>{class n{constructor(){this.value="",this.rondomIdentifier=`ng-select_${Math.round(1e4*Math.random())}_option`}search(e){this.value=e}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["selection-search"]],decls:6,vars:2,consts:[[1,"search-field"],["type","text","placeholder","search",3,"id","keyup"],["searchField",""],[3,"for"],[1,"material-symbols-outlined"]],template:function(i,r){if(1&i){const c=t.EpF();t.TgZ(0,"div",0)(1,"input",1,2),t.NdJ("keyup",function(){t.CHM(c);const U=t.MAs(2);return t.KtG(r.search(U.value))}),t.qZA(),t.TgZ(3,"label",3)(4,"span",4),t._uU(5,"Search"),t.qZA()()()}2&i&&(t.xp6(1),t.Q6J("id",r.rondomIdentifier),t.xp6(2),t.Q6J("for",r.rondomIdentifier))},styles:[".search-field[_ngcontent-%COMP%]{display:flex;align-items:center;height:2.1em;padding:.6em .5em;border:1px solid rgba(229,229,229,.8);border-radius:5px}.search-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;width:100%;font-size:1.1em;height:1.2em}.search-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{letter-spacing:1px;color:#a9a9a9;font-size:1em}.search-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.search-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{height:24px;cursor:pointer}.search-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#a9a9a9}"]})}return n})(),q=(()=>{class n{transform(e,i,r="title"){return e?i?e.filter(o=>o[r].toLowerCase().includes(i.toLowerCase())):e:[]}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275pipe=t.Yjl({name:"search",type:n,pure:!0,standalone:!0})}return n})();function D(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",28)(1,"label",29)(2,"input",30),t.NdJ("change",function(){const c=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.countriesOption.toggle(c))}),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()()}if(2&n){const e=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("for",e.id),t.xp6(1),t.Q6J("id",e.id)("value",e)("checked",i.countriesOption.isSelected(e)),t.xp6(2),t.hij(" ",e.name,"")}}function J(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",31),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.countriesSlice=r.filter.countries.length)}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"home.view_more")))}function I(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",28)(1,"label",29)(2,"input",32),t.NdJ("change",function(){const c=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.citiesOption.toggle(c))}),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()()}if(2&n){const e=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("for",e.id),t.xp6(1),t.Q6J("id",e.id)("name",e.title)("checked",i.citiesOption.isSelected(e)),t.xp6(2),t.Oqu(e.name)}}function z(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",31),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.citiesSlice=r.cities.length)}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"home.view_more"),""))}function E(n,s){1&n&&(t.TgZ(0,"div",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"offerPage.selectCountryFirst")))}function H(n,s){if(1&n&&(t.TgZ(0,"div",34)(1,"div"),t._UZ(2,"app-card",35),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Q6J("card",e)}}let Y=(()=>{class n{constructor(e,i,r,c){this.route=e,this.offerService=i,this.countryCitiesService=r,this.fb=c,this.countriesSlice=5,this.citiesSlice=5,this.countriesOption=new x({multiple:!1}),this.citiesOption=new x({multiple:!1}),this.params=new u.LE,this.FilterForm=this.fb.group({min_price:new a.NI,max_price:new a.NI,start_date:new a.NI,end_date:new a.NI,country_id:new a.NI,city_id:new a.NI}),e.data.subscribe(o=>{this.offers=o.data.offer,this.filter=o.data.filter,this.setInitialValue()}),this.FilterForm.valueChanges.subscribe(o=>{clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.trackFilterFields(o)},400)})}setInitialValue(){this.FilterForm.controls.max_price.setValue(this.filter.max_price),this.FilterForm.controls.min_price.setValue(this.filter.min_price),this.citiesOption.onSelectChanged.subscribe(e=>{this.FilterForm.controls.city_id.setValue(e?.[0]?.id||null)}),this.countriesOption.onSelectChanged.subscribe(e=>{this.FilterForm.controls.country_id.setValue(e?.[0]?.id||null),this.countryCitiesService.getCities(e?.[0]?.id).subscribe(i=>this.cities=i?.data)})}trackFilterFields(e){e.start_date&&(e.start_date=new Date(e.start_date).toISOString()),e.end_date&&(e.end_date=new Date(e.end_date).toISOString()),this.params=new u.LE,Object.keys(e).forEach(i=>{e[`${i}`]&&(this.params=this.params.set(i,`${e[`${i}`]}`))}),d.z.open(),this.offerService.getOffers(this.params).subscribe({next:i=>{this.offers=i.data.offers.map(r=>new M.Z(r)),d.z.close()},error:()=>{d.z.close()}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(O.gz),t.Y36(Z.b),t.Y36(S.M),t.Y36(a.qu))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-offers"]],standalone:!0,features:[t.jDz],decls:63,vars:43,consts:[[1,"banner"],["src","assets/images/offer/offer-banner.jpg",1,"img-contain","mb-4"],[1,"container"],[1,"row"],[1,"col-3"],[1,"chip"],[1,"d-flex","gap-2"],[1,"form-group-horzintal"],["for","maxPrice"],["id","maxPrice","type","text",3,"formControl"],["for","minPrice"],["id","minPrice","type","text",3,"formControl"],[1,"range-slider","my-4"],[3,"min","max","minControl","maxControl"],["countriesSearch",""],[1,"py-2"],[1,"scrollable-40"],["class","checkbox-field",4,"ngFor","ngForOf"],["class","view-more",3,"click",4,"ngIf"],["citiesSearch",""],[1,"pb-2"],["class","view-more",4,"ngIf"],[1,"d-flex","flex-column","gap-3"],[1,"date-label"],[1,"d-flex","align-items-center","gap-2"],[3,"formControl"],[1,"col-9"],["class","col-lg-4 col-md-5 col-6 mb-3",4,"ngFor","ngForOf"],[1,"checkbox-field"],[3,"for"],["type","checkbox",3,"id","value","checked","change"],[1,"view-more",3,"click"],["type","checkbox",3,"id","name","checked","change"],[1,"view-more"],[1,"col-lg-4","col-md-5","col-6","mb-3"],[3,"card"]],template:function(i,r){if(1&i&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"div",5)(7,"h6"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",6)(11,"div",7)(12,"label",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"div",7)(17,"label",10),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",11),t.qZA()(),t.TgZ(21,"div",12),t._UZ(22,"app-range",13),t.qZA()(),t.TgZ(23,"div",5)(24,"h6"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"selection-search",null,14)(29,"div",15),t.TgZ(30,"div",16),t.YNc(31,D,5,5,"div",17),t.ALo(32,"search"),t.qZA(),t.YNc(33,J,3,3,"div",18),t.qZA(),t.TgZ(34,"div",5)(35,"h6"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"selection-search",null,19)(40,"div",20),t.TgZ(41,"div",16),t.YNc(42,I,5,5,"div",17),t.ALo(43,"search"),t.qZA(),t.YNc(44,z,3,3,"div",18),t.YNc(45,E,3,3,"div",21),t.qZA(),t.TgZ(46,"div",5)(47,"div",22)(48,"label",23)(49,"span"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"div",24),t._UZ(53,"p-calendar",25),t.qZA()(),t.TgZ(54,"label",23)(55,"span"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"div",24),t._UZ(59,"p-calendar",25),t.qZA()()()()()(),t.TgZ(60,"div",26)(61,"div",3),t.YNc(62,H,3,1,"div",27),t.qZA()()()()),2&i){const c=t.MAs(28),o=t.MAs(39);t.xp6(8),t.Oqu(t.lcZ(9,21,"offerPage.price")),t.xp6(5),t.Oqu(t.lcZ(14,23,"offerPage.maxPrice")),t.xp6(2),t.Q6J("formControl",r.FilterForm.controls.max_price),t.xp6(3),t.Oqu(t.lcZ(19,25,"offerPage.minPrice")),t.xp6(2),t.Q6J("formControl",r.FilterForm.controls.min_price),t.xp6(2),t.Q6J("min",r.filter.min_price)("max",r.filter.max_price)("minControl",r.FilterForm.controls.min_price)("maxControl",r.FilterForm.controls.max_price),t.xp6(3),t.Oqu(t.lcZ(26,27,"offerPage.countries")),t.xp6(6),t.Q6J("ngForOf",t.Dn7(32,29,r.filter.countries.slice(0,r.countriesSlice),c.value,"name")),t.xp6(2),t.Q6J("ngIf",r.countriesSlice!=r.filter.countries.length),t.xp6(3),t.Oqu(t.lcZ(37,33,"offerPage.cities")),t.xp6(6),t.Q6J("ngForOf",t.Dn7(43,35,null==r.cities?null:r.cities.slice(0,r.citiesSlice),o.value,"name")),t.xp6(2),t.Q6J("ngIf",r.citiesSlice!=(null==r.cities?null:r.cities.length)&&(null==r.cities?null:r.cities.length)),t.xp6(1),t.Q6J("ngIf",!(null!=r.cities&&r.cities.length)),t.xp6(5),t.Oqu(t.lcZ(51,39,"home.from")),t.xp6(3),t.Q6J("formControl",r.FilterForm.controls.start_date),t.xp6(3),t.Oqu(t.lcZ(57,41,"home.to")),t.xp6(3),t.Q6J("formControl",r.FilterForm.controls.end_date),t.xp6(3),t.Q6J("ngForOf",r.offers)}},dependencies:[h.ez,h.sg,h.O5,_.A,v,P,p.aw,p.X$,f._8,f.f,a.u5,a.Fj,a.JJ,a.UX,a.oH,T,k,q],styles:[".chip[_ngcontent-%COMP%]{width:100%;border:solid 1px #ececec;border-radius:10px;box-shadow:0 11px 9px #00000008;padding:15px;background:#fff;margin-bottom:30px}h6[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px;color:rgb(var(--text-color))}.form-group-horzintal[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;margin-bottom:5px}.form-group-horzintal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:100%;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem;transition:.5s}.form-group-horzintal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:rgb(var(--accent))}.form-group-horzintal[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#000;font-size:12px}.checkbox-field[_ngcontent-%COMP%]{margin-bottom:12px}.checkbox-field[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:15px;height:15px;accent-color:rgb(var(--accent))}.checkbox-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.checkbox-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:15px;color:rgb(var(--text-color-offset));font-size:14px}.view-more[_ngcontent-%COMP%]{cursor:pointer;color:rgb(var(--primary));font-size:15px}.date-label[_ngcontent-%COMP%]{color:rgb(var(--text-color-offset));font-size:14px}"]})}return n})()}}]);