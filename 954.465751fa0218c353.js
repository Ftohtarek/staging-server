"use strict";(self.webpackChunksama=self.webpackChunksama||[]).push([[954],{8366:(Z,f,n)=>{n.d(f,{e:()=>x});var u=n(6814),o=n(9291);const v=["imageElement"];let g=(()=>{class s{constructor(i){this.el=i,this.lang=document.body.lang,this.imageUrl=null,this.save=new o.vpe,this.cancel=new o.vpe,this.isDragging=!1,this.dragStartX=0,this.dragStartY=0,this.imagePosition={x:0,y:0}}hireEvent(i){this.isDragging=!0;const{clientX:r,clientY:t}=this.getEventCoordinates(i);this.dragStartX=r,this.dragStartY=t}removeEvent(){this.isDragging=!1}startDrag(i){i.preventDefault(),this.hireEvent(i)}stopDrag(){this.removeEvent()}moveImage(i){if(this.isDragging){const{clientX:r,clientY:t}=this.getEventCoordinates(i);this.imagePosition.x+=r-this.dragStartX,this.imagePosition.y+=t-this.dragStartY,this.dragStartX=r,this.dragStartY=t}}getImageStyle(){return{transform:`translate(${this.imagePosition.x}px, ${this.imagePosition.y}px)`}}getEventCoordinates(i){return i instanceof MouseEvent?{clientX:i.clientX,clientY:i.clientY}:i instanceof TouchEvent&&i.touches.length>0?{clientX:i.touches[0].clientX,clientY:i.touches[0].clientY}:{clientX:0,clientY:0}}crop(){const i=this.imageElement.nativeElement,t=document.getElementById("crop-box").getBoundingClientRect(),c=t.width,a=t.height,p=i.getBoundingClientRect(),T=i.naturalWidth/p.width,I=i.naturalHeight/p.height,D=(t.left-p.left)*T,E=(t.top-p.top)*I,O=c*T,b=a*I,y=document.createElement("canvas");y.width=O,y.height=b,y.getContext("2d")?.drawImage(i,D,E,O,b,0,0,O,b);const S=y.toDataURL("image/png");this.save.emit(S)}static#t=this.\u0275fac=function(r){return new(r||s)(o.Y36(o.SBq))};static#e=this.\u0275cmp=o.Xpm({type:s,selectors:[["image-cropper"]],viewQuery:function(r,t){if(1&r&&o.Gf(v,5),2&r){let c;o.iGM(c=o.CRH())&&(t.imageElement=c.first)}},inputs:{imageUrl:"imageUrl"},outputs:{save:"save",cancel:"cancel"},standalone:!0,features:[o.jDz],decls:10,vars:4,consts:[[1,"cropper-container",3,"mousedown","touchstart","mouseleave","mouseup","touchend","mousemove","touchmove"],["id","uploadProfileImage","alt","Selected Image","draggable","false",3,"src","ngStyle"],["imageElement",""],[1,"crop-box-overlay"],["id","crop-box",1,"crop-box"],[1,"d-flex","align-items-center","gap-2","my-1"],[1,"w-100","cancel-btn",3,"click"],[1,"w-100","save-btn",3,"click"]],template:function(r,t){1&r&&(o.TgZ(0,"div",0),o.NdJ("mousedown",function(a){return t.startDrag(a)})("touchstart",function(a){return t.startDrag(a)})("mouseleave",function(){return t.stopDrag()})("mouseup",function(){return t.stopDrag()})("touchend",function(){return t.stopDrag()})("mousemove",function(a){return t.moveImage(a)})("touchmove",function(a){return t.moveImage(a)}),o._UZ(1,"img",1,2)(3,"div",3)(4,"div",4),o.qZA(),o.TgZ(5,"div",5)(6,"button",6),o.NdJ("click",function(){return t.cancel.emit(!1)}),o._uU(7),o.qZA(),o.TgZ(8,"button",7),o.NdJ("click",function(){return t.crop()}),o._uU(9),o.qZA()()),2&r&&(o.xp6(1),o.Q6J("src",t.imageUrl,o.LSH)("ngStyle",t.getImageStyle()),o.xp6(6),o.Oqu("en"==t.lang?"cancel":"\u0625\u0644\u063a\u0627\u0621"),o.xp6(2),o.Oqu("en"==t.lang?"save":"\u062d\u0641\u0638"))},dependencies:[u.ez,u.PC],styles:["[_nghost-%COMP%]{display:block;width:100%}img[_ngcontent-%COMP%]{width:100%;object-fit:cover;position:absolute;cursor:pointer}.cropper-container[_ngcontent-%COMP%]{height:60vh;position:relative;overflow:hidden;width:100%;max-height:350px;background-color:#00000080}.crop-box[_ngcontent-%COMP%], .crop-box-overlay[_ngcontent-%COMP%]{width:200px;height:200px;position:absolute;inset:0;margin:auto;z-index:99;border-radius:100%}.crop-box-overlay[_ngcontent-%COMP%]{border-radius:0;width:100%;height:100%;background:radial-gradient(circle at center,transparent 100px,rgba(5,16,54,.245) 101px)}button[_ngcontent-%COMP%]{font-size:16px;background-color:transparent;outline:none;border:none;padding:8px 12px;cursor:pointer;border-radius:4px}.save-btn[_ngcontent-%COMP%]{background-color:rgb(var(--primary));color:#fff}.cancel-btn[_ngcontent-%COMP%]{background-color:rgb(var(--cancel))}"]})}return s})();class l{loadImage(P){return new Promise(i=>{P.length<=0&&i(null);const r=new FileReader;r.onload=t=>{i(t.target.result)},r.readAsDataURL(P[0])})}}let e=(()=>{class s{static#t=this.\u0275fac=function(r){return new(r||s)};static#e=this.\u0275mod=o.oAB({type:s});static#o=this.\u0275inj=o.cJS({providers:[l],imports:[u.ez,g]})}return s})();var h=n(439),M=n(7699),d=n(3632);let m=(()=>{class s{constructor(i){this.uploadController=i,this.onLoad=new o.vpe}onUpload(i){this.uploadController.loadImage(i.target.files).then(t=>{this.onLoad.emit(t)})}static#t=this.\u0275fac=function(r){return new(r||s)(o.Y36(l))};static#e=this.\u0275dir=o.lG2({type:s,selectors:[["input","ngUpload",""]],hostBindings:function(r,t){1&r&&o.NdJ("change",function(a){return t.onUpload(a)})},outputs:{onLoad:"onLoad"},standalone:!0})}return s})();var U=n(9521),A=n(7732);let x=(()=>{class s{constructor(i,r){this.auth=i,this.profileService=r,this.cropperVisibility=!1}onUpload(i){this.imgSrc=i,this.cropperVisibility=!0}cancel(){this.cropperVisibility=!1}save(i){this.imgSrc=i,this.cropperVisibility=!1}static#t=this.\u0275fac=function(r){return new(r||s)(o.Y36(M.V),o.Y36(d.i))};static#e=this.\u0275cmp=o.Xpm({type:s,selectors:[["app-profile-image"]],standalone:!0,features:[o.jDz],decls:13,vars:5,consts:[[1,"profile-meta-info","grid-sm","align-items-center","mb-2"],[1,"sticky-upload"],[1,"profile-img"],[1,"img-contain",3,"src","alt"],["for","upload",1,"upload-image"],["src","assets/images/svg/upload.svg","alt","uplaod","width","22","height","22"],["id","upload","type","file","accept","image/*","ngUpload","",3,"onLoad"],[3,"visible","visibleChange"],[1,"img-cropper-container"],[3,"imageUrl","cancel","save"]],template:function(r,t){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._UZ(3,"img",3),o.qZA(),o.TgZ(4,"label",4),o._UZ(5,"img",5),o.TgZ(6,"input",6),o.NdJ("onLoad",function(a){return t.onUpload(a)}),o.qZA()()(),o.TgZ(7,"h3"),o._uU(8),o.qZA()(),o.TgZ(9,"ng-dialog",7),o.NdJ("visibleChange",function(a){return t.cropperVisibility=a}),o.TgZ(10,"dialog-body")(11,"div",8)(12,"image-cropper",9),o.NdJ("cancel",function(){return t.cancel()})("save",function(a){return t.save(a)}),o.qZA()()()()),2&r&&(o.xp6(3),o.Q6J("src",t.imgSrc||(null==t.auth.user?null:t.auth.user.image),o.LSH)("alt",null==t.auth.user?null:t.auth.user.first_name),o.xp6(5),o.Oqu(null==t.auth.user?null:t.auth.user.first_name),o.xp6(1),o.Q6J("visible",t.cropperVisibility),o.xp6(3),o.Q6J("imageUrl",t.imgSrc))},dependencies:[u.ez,e,m,g,h.S,U.a,A.H],styles:[".profile-meta-info[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;border:2px solid rgba(var(--accent),.7);overflow:hidden}.profile-meta-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:500;text-transform:capitalize}.profile-meta-info[_ngcontent-%COMP%]   .sticky-upload[_ngcontent-%COMP%]{position:relative}.profile-meta-info[_ngcontent-%COMP%]   .upload-image[_ngcontent-%COMP%]{background-color:#fff;border-radius:50%;width:34px;height:34px;display:flex;align-items:center;justify-content:center;cursor:pointer;position:absolute;bottom:0;right:0}.profile-meta-info[_ngcontent-%COMP%]   .upload-image[_ngcontent-%COMP%]:lang(ar){right:unset;left:0}.profile-meta-info[_ngcontent-%COMP%]   .upload-image[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.img-cropper-container[_ngcontent-%COMP%]{width:100vw;min-width:300px;max-width:400px}"]})}return s})()},3632:(Z,f,n)=>{n.d(f,{i:()=>e});var u=n(9291),o=n(9397),v=n(3052),g=n(9862),l=n(7699);let e=(()=>{class h{constructor(d,m){this.http=d,this.authState=m,this.baseUrl=v.N.baseUrl,this.userProfile=(0,u.tdS)({})}profile(){return this.http.get(`${this.baseUrl}v1/profile`)}updateProfile(d){return this.http.post(`${this.baseUrl}v1/update-profile`,d).pipe((0,o.b)(m=>{this.authState.updateUser(m.data),this.userProfile.update(()=>m.data)}))}sync(){this.profile().subscribe(d=>this.userProfile.update(()=>d.data))}static#t=this.\u0275fac=function(m){return new(m||h)(u.LFG(g.eN),u.LFG(l.V))};static#e=this.\u0275prov=u.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},8954:(Z,f,n)=>{n.r(f),n.d(f,{UserAccountModule:()=>r});var u=n(6814),o=n(3911),v=n(8366),g=n(9795),l=n(6026),e=n(9291),h=n(319);function M(t,c){if(1&t&&(e.TgZ(0,"div",4)(1,"ul",5),e._UZ(2,"app-profile-image"),e.TgZ(3,"li",6),e._UZ(4,"img",7),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"li",6),e._UZ(8,"img",8),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"li",6),e._UZ(12,"img",9),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"li",6),e._UZ(16,"img",10),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"li",6),e._UZ(20,"img",11),e._uU(21),e.ALo(22,"translate"),e.qZA()()()),2&t){const a=e.oxw();e.xp6(3),e.Q6J("routerLink",a.appRoutes.userAccount.profile),e.xp6(2),e.hij(" ",e.lcZ(6,10,"userAccount.profile")," "),e.xp6(2),e.Q6J("routerLink",a.appRoutes.userAccount.wallet),e.xp6(2),e.hij(" ",e.lcZ(10,12,"userAccount.samaWallet")," "),e.xp6(2),e.Q6J("routerLink",a.appRoutes.userAccount.reservation),e.xp6(2),e.hij(" ",e.lcZ(14,14,"userAccount.reservation")," "),e.xp6(2),e.Q6J("routerLink",a.appRoutes.userAccount.bookingOffer),e.xp6(2),e.hij(" ",e.lcZ(18,16,"userAccount.offerBooking")," "),e.xp6(2),e.Q6J("routerLink",a.appRoutes.userAccount.favorite),e.xp6(2),e.hij(" ",e.lcZ(22,18,"userAccount.favourites")," ")}}function d(t,c){1&t&&e._UZ(0,"div")}let m=(()=>{class t{constructor(a){this.deviceMode=a,this.appRoutes=l.VP}static#t=this.\u0275fac=function(p){return new(p||t)(e.Y36(h.Q))};static#e=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-account-layout"]],decls:5,vars:4,consts:[[1,"container"],[1,"align-items-start","my-3"],["class","user-options",4,"ngIf"],[4,"ngIf"],[1,"user-options"],[1,"shadow-sm","rounded-2","pb-5"],["routerLinkActive","active-link",3,"routerLink"],["src","assets/images/svg/profile.svg","alt","profile","width","22","height","22"],["src","assets/images/svg/wallet.svg","alt","profile","width","22","height","22"],["src","assets/images/svg/save.svg","alt","profile","width","22","height","22"],["src","assets/images/svg/save-offer.svg","alt","profile","width","22","height","22"],["src","assets/images/svg/heart.svg","alt","profile","width","22","height","22"]],template:function(p,C){1&p&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,M,23,20,"div",2),e.YNc(3,d,1,0,"div",3),e._UZ(4,"router-outlet"),e.qZA()()),2&p&&(e.xp6(1),e.ekj("row-sm",C.deviceMode.isDesktop()),e.xp6(1),e.Q6J("ngIf",C.deviceMode.isDesktop()),e.xp6(1),e.Q6J("ngIf",C.deviceMode.isMobile()))},dependencies:[u.O5,g.lC,g.rH,g.Od,v.e,o.X$],styles:[".user-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:1.4rem 10px;width:-moz-fit-content;width:fit-content}.user-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;cursor:pointer;min-width:220px;font-size:15px;font-weight:500;padding:15px 8px;margin-bottom:10px}.user-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transition:.3s;background-color:rgb(var(--primary),.2);color:rgb(var(--primary));border-radius:4px}.active-link[_ngcontent-%COMP%]{background-color:rgb(var(--primary),.2);color:rgb(var(--primary));border-radius:4px}"]})}return t})();var U=n(3632),x=n(3774);const s=(t,c)=>(0,e.f3M)(x.D).getReservation(l.HJ.userAccount.reservation==t.routeConfig?.path?"service":"offer"),P=[{path:"",component:m,resolve:[(t,c)=>{const a=(0,e.f3M)(U.i);return!!Object.keys(a.userProfile()).length||a.sync()}],children:[{path:"",redirectTo:l.HJ.userAccount.profile,pathMatch:"full"},{path:l.HJ.userAccount.profile,loadComponent:()=>Promise.all([n.e(223),n.e(611)]).then(n.bind(n,6611)).then(t=>t.ProfileComponent)},{path:l.HJ.userAccount.wallet,loadComponent:()=>n.e(124).then(n.bind(n,8124)).then(t=>t.WalletComponent)},{path:l.HJ.userAccount.reservation,loadComponent:()=>Promise.all([n.e(592),n.e(246)]).then(n.bind(n,7246)).then(t=>t.ReservationComponent),resolve:{data:s}},{path:l.HJ.userAccount.bookingOffer,loadComponent:()=>Promise.all([n.e(592),n.e(127)]).then(n.bind(n,9127)).then(t=>t.OfferBookingComponent),resolve:{data:s}},{path:l.HJ.userAccount.favorite,loadComponent:()=>n.e(580).then(n.bind(n,4580)).then(t=>t.FavoriteComponent)}]}];let i=(()=>{class t{static#t=this.\u0275fac=function(p){return new(p||t)};static#e=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(P),g.Bz]})}return t})(),r=(()=>{class t{static#t=this.\u0275fac=function(p){return new(p||t)};static#e=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[u.ez,i,o.aw,v.e]})}return t})()}}]);