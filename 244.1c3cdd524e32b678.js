"use strict";(self.webpackChunksama=self.webpackChunksama||[]).push([[244],{8366:(T,C,i)=>{i.d(C,{e:()=>b});var u=i(6814),e=i(9291);const y=["imageElement"];let d=(()=>{class s{constructor(r){this.el=r,this.lang=document.body.lang,this.imageUrl=null,this.save=new e.vpe,this.cancel=new e.vpe,this.isDragging=!1,this.dragStartX=0,this.dragStartY=0,this.imagePosition={x:0,y:0}}hireEvent(r){this.isDragging=!0;const{clientX:a,clientY:n}=this.getEventCoordinates(r);this.dragStartX=a,this.dragStartY=n}removeEvent(){this.isDragging=!1}startDrag(r){r.preventDefault(),this.hireEvent(r)}stopDrag(){this.removeEvent()}moveImage(r){if(this.isDragging){const{clientX:a,clientY:n}=this.getEventCoordinates(r);this.imagePosition.x+=a-this.dragStartX,this.imagePosition.y+=n-this.dragStartY,this.dragStartX=a,this.dragStartY=n}}getImageStyle(){return{transform:`translate(${this.imagePosition.x}px, ${this.imagePosition.y}px)`}}getEventCoordinates(r){return r instanceof MouseEvent?{clientX:r.clientX,clientY:r.clientY}:r instanceof TouchEvent&&r.touches.length>0?{clientX:r.touches[0].clientX,clientY:r.touches[0].clientY}:{clientX:0,clientY:0}}crop(){const r=this.imageElement.nativeElement,n=document.getElementById("crop-box").getBoundingClientRect(),l=n.width,o=n.height,v=r.getBoundingClientRect(),P=r.naturalWidth/v.width,L=r.naturalHeight/v.height,D=(n.left-v.left)*P,E=(n.top-v.top)*L,Z=l*P,I=o*L,M=document.createElement("canvas");M.width=Z,M.height=I,M.getContext("2d")?.drawImage(r,D,E,Z,I,0,0,Z,I);const S=M.toDataURL("image/png");this.save.emit(S)}static#t=this.\u0275fac=function(a){return new(a||s)(e.Y36(e.SBq))};static#e=this.\u0275cmp=e.Xpm({type:s,selectors:[["image-cropper"]],viewQuery:function(a,n){if(1&a&&e.Gf(y,5),2&a){let l;e.iGM(l=e.CRH())&&(n.imageElement=l.first)}},inputs:{imageUrl:"imageUrl"},outputs:{save:"save",cancel:"cancel"},standalone:!0,features:[e.jDz],decls:10,vars:4,consts:[[1,"cropper-container",3,"mousedown","touchstart","mouseleave","mouseup","touchend","mousemove","touchmove"],["id","uploadProfileImage","alt","Selected Image","draggable","false",3,"src","ngStyle"],["imageElement",""],[1,"crop-box-overlay"],["id","crop-box",1,"crop-box"],[1,"d-flex","align-items-center","gap-2","my-1"],[1,"w-100","cancel-btn",3,"click"],[1,"w-100","save-btn",3,"click"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.NdJ("mousedown",function(o){return n.startDrag(o)})("touchstart",function(o){return n.startDrag(o)})("mouseleave",function(){return n.stopDrag()})("mouseup",function(){return n.stopDrag()})("touchend",function(){return n.stopDrag()})("mousemove",function(o){return n.moveImage(o)})("touchmove",function(o){return n.moveImage(o)}),e._UZ(1,"img",1,2)(3,"div",3)(4,"div",4),e.qZA(),e.TgZ(5,"div",5)(6,"button",6),e.NdJ("click",function(){return n.cancel.emit(!1)}),e._uU(7),e.qZA(),e.TgZ(8,"button",7),e.NdJ("click",function(){return n.crop()}),e._uU(9),e.qZA()()),2&a&&(e.xp6(1),e.Q6J("src",n.imageUrl,e.LSH)("ngStyle",n.getImageStyle()),e.xp6(6),e.Oqu("en"==n.lang?"cancel":"\u0625\u0644\u063a\u0627\u0621"),e.xp6(2),e.Oqu("en"==n.lang?"save":"\u062d\u0641\u0638"))},dependencies:[u.ez,u.PC],styles:["[_nghost-%COMP%]{display:block;width:100%}img[_ngcontent-%COMP%]{width:100%;object-fit:cover;position:absolute;cursor:pointer}.cropper-container[_ngcontent-%COMP%]{height:60vh;position:relative;overflow:hidden;width:100%;max-height:350px;background-color:#00000080}.crop-box[_ngcontent-%COMP%], .crop-box-overlay[_ngcontent-%COMP%]{width:200px;height:200px;position:absolute;inset:0;margin:auto;z-index:99;border-radius:100%}.crop-box-overlay[_ngcontent-%COMP%]{border-radius:0;width:100%;height:100%;background:radial-gradient(circle at center,transparent 100px,rgba(5,16,54,.245) 101px)}button[_ngcontent-%COMP%]{font-size:16px;background-color:transparent;outline:none;border:none;padding:8px 12px;cursor:pointer;border-radius:4px}.save-btn[_ngcontent-%COMP%]{background-color:rgb(var(--primary));color:#fff}.cancel-btn[_ngcontent-%COMP%]{background-color:rgb(var(--cancel))}"]})}return s})();class p{loadImage(U){return new Promise(r=>{U.length<=0&&r(null);const a=new FileReader;a.onload=n=>{r(n.target.result)},a.readAsDataURL(U[0])})}}let t=(()=>{class s{static#t=this.\u0275fac=function(a){return new(a||s)};static#e=this.\u0275mod=e.oAB({type:s});static#o=this.\u0275inj=e.cJS({providers:[p],imports:[u.ez,d]})}return s})();var f=i(439),A=i(7699),m=i(3632);let h=(()=>{class s{constructor(r){this.uploadController=r,this.onLoad=new e.vpe}onUpload(r){this.uploadController.loadImage(r.target.files).then(n=>{this.onLoad.emit(n)})}static#t=this.\u0275fac=function(a){return new(a||s)(e.Y36(p))};static#e=this.\u0275dir=e.lG2({type:s,selectors:[["input","ngUpload",""]],hostBindings:function(a,n){1&a&&e.NdJ("change",function(o){return n.onUpload(o)})},outputs:{onLoad:"onLoad"},standalone:!0})}return s})();var x=i(9521),O=i(7732);let b=(()=>{class s{constructor(r,a){this.auth=r,this.profileService=a,this.cropperVisibility=!1}onUpload(r){this.imgSrc=r,this.cropperVisibility=!0}cancel(){this.cropperVisibility=!1}save(r){this.imgSrc=r,this.cropperVisibility=!1}static#t=this.\u0275fac=function(a){return new(a||s)(e.Y36(A.V),e.Y36(m.i))};static#e=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-profile-image"]],standalone:!0,features:[e.jDz],decls:13,vars:5,consts:[[1,"profile-meta-info","grid-sm","align-items-center","mb-2"],[1,"sticky-upload"],[1,"profile-img"],[1,"img-contain",3,"src","alt"],["for","upload",1,"upload-image"],["src","assets/images/svg/upload.svg","alt","uplaod","width","22","height","22"],["id","upload","type","file","accept","image/*","ngUpload","",3,"onLoad"],[3,"visible","visibleChange"],[1,"img-cropper-container"],[3,"imageUrl","cancel","save"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"label",4),e._UZ(5,"img",5),e.TgZ(6,"input",6),e.NdJ("onLoad",function(o){return n.onUpload(o)}),e.qZA()()(),e.TgZ(7,"h3"),e._uU(8),e.qZA()(),e.TgZ(9,"ng-dialog",7),e.NdJ("visibleChange",function(o){return n.cropperVisibility=o}),e.TgZ(10,"dialog-body")(11,"div",8)(12,"image-cropper",9),e.NdJ("cancel",function(){return n.cancel()})("save",function(o){return n.save(o)}),e.qZA()()()()),2&a&&(e.xp6(3),e.Q6J("src",n.imgSrc||(null==n.auth.user?null:n.auth.user.image),e.LSH)("alt",null==n.auth.user?null:n.auth.user.first_name),e.xp6(5),e.Oqu(null==n.auth.user?null:n.auth.user.first_name),e.xp6(1),e.Q6J("visible",n.cropperVisibility),e.xp6(3),e.Q6J("imageUrl",n.imgSrc))},dependencies:[u.ez,t,h,d,f.S,x.a,O.H],styles:[".profile-meta-info[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;border:2px solid rgba(var(--accent),.7);overflow:hidden}.profile-meta-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:500;text-transform:capitalize}.profile-meta-info[_ngcontent-%COMP%]   .sticky-upload[_ngcontent-%COMP%]{position:relative}.profile-meta-info[_ngcontent-%COMP%]   .upload-image[_ngcontent-%COMP%]{background-color:#fff;border-radius:50%;width:34px;height:34px;display:flex;align-items:center;justify-content:center;cursor:pointer;position:absolute;bottom:0;right:0}.profile-meta-info[_ngcontent-%COMP%]   .upload-image[_ngcontent-%COMP%]:lang(ar){right:unset;left:0}.profile-meta-info[_ngcontent-%COMP%]   .upload-image[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.img-cropper-container[_ngcontent-%COMP%]{width:100vw;min-width:300px;max-width:400px}"]})}return s})()},3632:(T,C,i)=>{i.d(C,{i:()=>t});var u=i(9291),e=i(9397),y=i(3052),d=i(9862),p=i(7699);let t=(()=>{class f{constructor(m,h){this.http=m,this.authState=h,this.baseUrl=y.N.baseUrl,this.userProfile=(0,u.tdS)({})}profile(){return this.http.get(`${this.baseUrl}v1/profile`)}updateProfile(m){return this.http.post(`${this.baseUrl}v1/update-profile`,m).pipe((0,e.b)(h=>{this.authState.updateUser(h.data),this.userProfile.update(()=>h.data)}))}sync(){this.profile().subscribe(m=>this.userProfile.update(()=>m.data))}static#t=this.\u0275fac=function(h){return new(h||f)(u.LFG(d.eN),u.LFG(p.V))};static#e=this.\u0275prov=u.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},244:(T,C,i)=>{i.r(C),i.d(C,{UserAccountModule:()=>l});var u=i(6814),e=i(3911),y=i(8366),d=i(9068),p=i(6026),t=i(9291),f=i(319);function A(o,v){if(1&o&&(t.TgZ(0,"div",4)(1,"ul",5),t._UZ(2,"app-profile-image"),t.TgZ(3,"li",6),t._UZ(4,"img",7),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"li",6),t._UZ(8,"img",8),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"li",6),t._UZ(12,"img",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",6),t._UZ(16,"img",10),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"li",6),t._UZ(20,"img",11),t._uU(21),t.ALo(22,"translate"),t.qZA()()()),2&o){const c=t.oxw();t.xp6(3),t.Q6J("routerLink",c.appRoutes.userAccount.profile),t.xp6(2),t.hij(" ",t.lcZ(6,10,"userAccount.profile")," "),t.xp6(2),t.Q6J("routerLink",c.appRoutes.userAccount.wallet),t.xp6(2),t.hij(" ",t.lcZ(10,12,"userAccount.samaWallet")," "),t.xp6(2),t.Q6J("routerLink",c.appRoutes.userAccount.reservation),t.xp6(2),t.hij(" ",t.lcZ(14,14,"userAccount.reservation")," "),t.xp6(2),t.Q6J("routerLink",c.appRoutes.userAccount.bookingOffer),t.xp6(2),t.hij(" ",t.lcZ(18,16,"userAccount.offerBooking")," "),t.xp6(2),t.Q6J("routerLink",c.appRoutes.userAccount.favorite),t.xp6(2),t.hij(" ",t.lcZ(22,18,"userAccount.favourites")," ")}}function m(o,v){1&o&&t._UZ(0,"div")}let h=(()=>{class o{constructor(c){this.deviceMode=c,this.appRoutes=p.VP}static#t=this.\u0275fac=function(g){return new(g||o)(t.Y36(f.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-user-account-layout"]],decls:5,vars:4,consts:[[1,"container"],[1,"align-items-start","my-3"],["class","user-options",4,"ngIf"],[4,"ngIf"],[1,"user-options"],[1,"shadow-sm","rounded-2","pb-5"],["routerLinkActive","active-link",3,"routerLink"],["src","assets/images/svg/profile.svg","alt","profile","width","22","height","22"],["src","assets/images/svg/wallet.svg","alt","profile","width","22","height","22"],["src","assets/images/svg/save.svg","alt","profile","width","22","height","22"],["src","assets/images/svg/save-offer.svg","alt","profile","width","22","height","22"],["src","assets/images/svg/heart.svg","alt","profile","width","22","height","22"]],template:function(g,P){1&g&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,A,23,20,"div",2),t.YNc(3,m,1,0,"div",3),t._UZ(4,"router-outlet"),t.qZA()()),2&g&&(t.xp6(1),t.ekj("row-sm",P.deviceMode.isDesktop()),t.xp6(1),t.Q6J("ngIf",P.deviceMode.isDesktop()),t.xp6(1),t.Q6J("ngIf",P.deviceMode.isMobile()))},dependencies:[u.O5,d.lC,d.rH,d.Od,y.e,e.X$],styles:[".user-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:1.4rem 10px;width:-moz-fit-content;width:fit-content}.user-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;cursor:pointer;min-width:220px;font-size:15px;font-weight:500;padding:15px 8px;margin-bottom:10px}.user-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transition:.3s;background-color:rgb(var(--primary),.2);color:rgb(var(--primary));border-radius:4px}.active-link[_ngcontent-%COMP%]{background-color:rgb(var(--primary),.2);color:rgb(var(--primary));border-radius:4px}"]})}return o})();var x=i(3632),b=i(3052),s=i(9862);let U=(()=>{class o{constructor(c){this.http=c,this.baseUrl=b.N.baseUrl}getReservation(c){return this.http.get(`${this.baseUrl}v1/getReservations?type=${c}`)}static#t=this.\u0275fac=function(g){return new(g||o)(t.LFG(s.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const r=(o,v)=>(0,t.f3M)(U).getReservation(p.HJ.userAccount.reservation==o.routeConfig?.path?"service":"offer"),a=[{path:"",component:h,resolve:[(o,v)=>{const c=(0,t.f3M)(x.i);return!!Object.keys(c.userProfile()).length||c.sync()}],children:[{path:"",redirectTo:p.HJ.userAccount.profile,pathMatch:"full"},{path:p.HJ.userAccount.profile,loadComponent:()=>Promise.all([i.e(223),i.e(611)]).then(i.bind(i,6611)).then(o=>o.ProfileComponent)},{path:p.HJ.userAccount.wallet,loadComponent:()=>i.e(124).then(i.bind(i,8124)).then(o=>o.WalletComponent)},{path:p.HJ.userAccount.reservation,loadComponent:()=>Promise.all([i.e(592),i.e(246)]).then(i.bind(i,7246)).then(o=>o.ReservationComponent),resolve:{data:r}},{path:p.HJ.userAccount.bookingOffer,loadComponent:()=>Promise.all([i.e(592),i.e(127)]).then(i.bind(i,9127)).then(o=>o.OfferBookingComponent),resolve:{data:r}},{path:p.HJ.userAccount.favorite,loadComponent:()=>i.e(580).then(i.bind(i,4580)).then(o=>o.FavoriteComponent)}]}];let n=(()=>{class o{static#t=this.\u0275fac=function(g){return new(g||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(a),d.Bz]})}return o})(),l=(()=>{class o{static#t=this.\u0275fac=function(g){return new(g||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[u.ez,n,e.aw,y.e]})}return o})()}}]);